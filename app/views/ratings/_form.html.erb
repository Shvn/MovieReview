<%= form_for [@movie, @rating] do |f| %>
  <% if rating.errors.any? %>
    <div style="color: red">
      <h2><%= pluralize(rating.errors.count, "error") %> prohibited this rating from being saved:</h2>

      <ul>
        <% rating.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <table>
    <thead>
      <tr>
        <th scope="col">Category</th>
        <% (1..5).each do |num| %>
          <th><%= num %></th>
        <% end %>
      </tr>
    </thead>
    <tbody>
      <%= f.fields_for :category_ratings do |ff| %>
        <tr>
          <%= ff.hidden_field :category_id, value: ff.object.category_id %>
          
          <td scope="row"><%= ff.label :score, ff.object.category.name %></td>

          <% (1..5).each do |num| %>
            <td><%= ff.radio_button :score, num  %></td>
          <% end %>

        </tr>
      <% end %>
    </tbody>
  </table>

  <div>
    <%= f.submit %>
  </div>
<% end %>
